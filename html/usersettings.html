<!DOCTYPE html>
<html lang="en">
<head>
    <!--Meta Tags needed for bootstrap-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Importing stylesheet so components can be adjusted on the page-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="../css/style.css" rel="stylesheet">

    <!--On the web browser tab, this is the title-->
    <title>Account Management</title>
</head>
<body>
     <!--Fetches user's profile picture and displays it-->
    <script type="module">
        import { getUserProfilePicture } from "../js/usersettings-functions.js";
        getUserProfilePicture();
    </script>
    <!--Creates a container defined for the logo and the profile picture-->
    <div class="container-fluid bg-primary">
        <!--Profile Picture and Logo on same row-->
        <div class="row align-items-center justify-content-between no-gutters">
                <!--Diffenrent Columns however, taking up only 4 columns each (bootstrap uses a 12 column system)-->
                <div class="col-4">
                    <img src="../img/logo.jpg" class="img-fluid w-50 h-auto float-start" alt="Logo">
                </div>
                <div class="col-4">
                    <!--Profile Picture is fetched from user's saved profile picture-->
                    <img id="user_profile_picture" class="img-fluid w-25 h-auto float-end rounded-circle" alt="Profile Picture">
                </div>
            </div>
        </div>     
    </div>
                
    <!--Creating a sidebar so user can choose what they want on their page-->
    <div class="container-fluid">
        <div class="row no-gutters">
            <div class="col-md-3">
                <ul class="list-group mt-3">
                    <!--Lists out all the available options, data-target used to make information appear-->
                    <li class="list-group-item border-darkening sidebar-item list-group-item-action" data-target="#item-1" id="user">Return Home</li>
                    <li class="list-group-item border-darkening sidebar-item list-group-item-action" data-target="#item-2">Profile</li>
                    <li class="list-group-item border-darkening sidebar-item list-group-item-action" data-target="#item-3">Account Settings</li>
                    <li class="list-group-item border-darkening sidebar-item list-group-item-action" data-target="#item-6" style="margin-bottom: 15px;" id="login">Log Out</li>
                </ul>
            </div>

            <div class="col-md-9">
                <div class="p-3">
                    <!--Information that will pop up when it's corresponding option is clicked-->
                    <!--This page allows users to make modifications to their public profile-->
                    <div id="item-2" class="item" style="display: none;">
                        <h2 style="text-align: center;">User Information</h2>
                        <form>
                            <div class="mb-3">
                                <label for="firstname" class="form-label">First Name</label>
                                <input type="text" class="form-control" id="firstname" placeholder="Hitori">
                            </div>
                            
                            <div class="mb-3">
                                <label for="lastname" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="lastname" placeholder="Gotoh">
                            </div>

                            <div class="mb-3">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" class="form-control" id="email" placeholder="hitori_gotoh@gmail.com">
                            </div>

                            <div class="mb-3">
                                <label for="phonenumber" class="form-label">Phone Number</label>
                                <input type="text" class="form-control" id="phonenumber" placeholder="(555)-555-5555">
                            </div>


                            <div class="mb-3">
                                <label for="bio" class="form-label">User Biography</label>
                                <textarea class="form-control" id="bio" rows="6" placeholder="Bocchi is literally me. No other character can come close to relating to me like her. There is no way you can convince me that I’m not Bocchi. Bocchi could not possibly be any more me. It’s me, and nobody can convince me otherwise. If anyone approached me about this not possibly being me, I immediately shut them down with overwhelming evidence that Bocchi was me. Bocchi is absolutely me; it is indisputable. Why anyone would try to argue that Bocchi is not me is beyond me. If you held two pictures of me and Bocchi side by side, you’d see no difference. I can safely look at Bocchi every day and say, “Yup, she’s me.” I can practically see Bocchi whenever I look at myself in the mirror. I go outside, and people stop me from commenting on how similar I look and act as Bocchi is. I chuckle softly as I’m assured every day Bocchi is me in every way. I can smile each time I get out of bed each morning, knowing that I’ve found my identity with Bocchi and I know my place in this world. It’s amusing how similar she is to me; it’s almost like identical twins. When I first saw Bocchi, I had an existential crisis. What it Bocchi was the real me and I was the fictional being? What if she actually became aware of my existence? Did she have the ability to become self-aware? "></textarea>
                            </div>

                            <div> 
                                <!--Once Operational, user's changes will be saved-->
                                <button type="submit" class="btn btn-primary mb-3" id="update_bio_button">Confirm Update</button>
                            </div>
                        </form>
                    </div>

                    <!--THis page will allow users to make adjustments to their account, such as change password, change profile picture or delete account -->
                    <div id="item-3" class="item" style="display: none;">
                        <h2 style="text-align: center;">Account Settings</h2>
                        <div class="row">
                            <form>
                                <h3>Change User Name</h3>
                                <div class="col-auto">
                                    <label for="new_username">New Username</label>
                                    <input type="text" class="form-control" id="new_username" placeholder="New Usename">
                                </div>
                                <div class="col-auto">
                                    <button type="submit" class="btn btn-primary mb-3" id="update_username_button">Confirm Username Change</button>
                                </div>
                            </form>
                        </div>
                        <!--Button Will update User password if password isn't the same from previous, and new passwords match>-->
                        <div class="row">
                            <form>
                                <!--User Can Change Password-->
                                <h3>Change Password</h3>
                                <div class="col-auto">
                                    <label for="oldpass" class="visually-hidden">Old Password</label>
                                    <input type="password" class="form-control" id="oldpass" placeholder="OldPassword">
                                </div>
                                
                                <div class="col-auto">
                                    <label for="newpass" class="visually-hidden">New Password</label>
                                    <input type="password" class="form-control" id="newpass" placeholder="NewPassword">
                                </div>

                                <div class="col-auto">
                                    <label for="newpassconfirm" class="visually-hidden">Confirm New Password</label>
                                    <input type="password" class="form-control" id="newpassconfirm" placeholder="NewPassword">
                                </div>

                                <div class="col-auto">
                                    <button type="submit" class="btn btn-primary mb-3" id="update_password_button">Confirm Password Change</button>
                                </div>
                            </form>
                        </div>
                        <!--Will change profile picture-->
                        <div class="row">
                            <div class="mb-3">
                                <!--Uses bootstrap's form label component for file selection-->
                                <label for="profilePictureInput" class="form-label">Choose Profile Picture</label>
                                <input type="file" class="form-control" id="profilePictureInput" name="profilePicture">
                            </div>
                            <div class="col-auto">
                                <button id="uploadProfilePictureButton" class="btn btn-primary mb-3">Upload Profile Picture</button>
                            </div>
                        </div>
                        <!--Button Will delete account forever (all information associated with user is lost)-->
                        <div class="row">
                            <div class="d-grid gap-2 col-4 mx-auto">
                                <button type="button" class="btn btn-danger" id="delete_account_button" data-bs-toggle="modal" data-bs-target="#delete_account_button_popup">
                                    DELETE Account FOREVER
                                </button>
                                <!-- Delete User Modal -->
                                <div class="modal fade" id="delete_account_button_popup" tabindex="-1" role="dialog" aria-labelledby="delete_account_button_popup" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h5 class="modal-title" id="deleteAccountLabel">DELETE ACCOUNT</h5>
                                            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                            </div>
                                            <div class="modal-body">
                                                ARE YOU SURE YOU WANT TO DELETE ACCOUNT FOREVER?
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-danger" id="confirm_delete_account_button">PERMANENTLY DELETE ACCOUNT</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- User Permanently Deleted Modal -->
                                <div class="modal fade" id="delete_account_confirmation_popup" tabindex="-1" role="dialog" aria-labelledby="delete_account_confirmation_popup" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h5 class="modal-title" id="deleteAccountConfirmationLabel">DELETE ACCOUNT</h5>
                                            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                            </div>
                                            <div class="modal-body" style="margin-top: 30px; margin-bottom: 30px;">
                                                ACCOUNT HAS BEEN PERMANENTLY DELETED!
                                            </div>
                                            <div class="modal-footer">
                                               NOW RETURNING TO LOGIN PAGE! 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <!--Importing the function, when an option is clicked, it reveals information-->
    <script type="module">
        import { sidebar_selector } from '../js/sidebar-selection.js';
        sidebar_selector();
    </script>

    <!--Accesses and changes user's profile picture if the user decides to change it-->
    <script type="module">
        import { upload_profile_picture } from "../js/usersettings-functions.js";
        upload_profile_picture()
    </script>

   <!--Permanently Deletes an existing user-->
    <script type="module">
        import { deleteCurrentUser } from "../js/usersettings-functions.js";
        deleteCurrentUser()
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>